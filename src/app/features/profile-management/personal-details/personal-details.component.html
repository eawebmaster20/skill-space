<form [formGroup]="PersonalDetails" class="form-div" (ngSubmit)="onSubmit()">
  <div class="form">
    <div class="form__col-1">
      <!-- Profile Picture Section -->
      <div class="form-group-div">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Profile Picture</h5>
            <p>This is what will be displayed on your profile.</p>
          </div>
          <div class="image">
            <div class="img-div">
              <img
                *ngIf="uploadedProfilePictureUrl"
                [src]="uploadedProfilePictureUrl"
                alt="Uploaded Profile Picture"
                class="uploaded-picture"
              />
            </div>
            <div class="form-group__col-2 picture">
              <div class="img-div">
                <img
                  src="assets/images/image-upload.png"
                  alt="Profile Picture"
                />
              </div>
              <div>
                <p><span>Click here or drag</span> your files to upload</p>
                <p>Supported formats: PNG, JPG, JPEG (10mb max)</p>
              </div>
              <input
                type="file"
                id="profilePicture"
                (change)="onFileSelect($event, 'profilePicture')"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Display Name Section -->
      <div class="form-group-div">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Display Name</h5>
            <p>This is what employers will see on your profile.</p>
          </div>
          <div class="form-group__col-2 name">
            <app-cva
              label="First Name"
              formControlName="firstName"
              class="name"
            />
            <app-cva
              label="Last Name"
              formControlName="lastName"
              class="name"
            />
          </div>
        </div>
      </div>

      <!-- Introduction Section -->
      <div class="form-group-div">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Introduction</h5>
            <p>Showcase your strengths, skills, and experience.</p>
          </div>
          <div class="form-group__col-2 introduction">
            <textarea
              formControlName="introduction"
              placeholder="Write about yourself"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Upload CV Section -->
      <div class="form-group-div">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Upload your C.V</h5>
            <p>You can upload up to 1 document.</p>
          </div>
          <div class="image">
            @if(uploadedCVUrl){
            <div class="img-div">
              <img
                [src]="uploadedCVUrl"
                alt="Uploaded cv "
                class="uploaded-picture"
              />
              <div (click)="onShowModal()">
                <span
                  ><svg
                    width="21"
                    height="21"
                    viewBox="0 0 21 21"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M14.0245 8.67484L11.8223 10.8789L14.0273 13.083C14.2386 13.2943 14.3573 13.581 14.3573 13.8798C14.3573 14.1787 14.2386 14.4654 14.0273 14.6767C13.8159 14.8881 13.5293 15.0068 13.2304 15.0068C12.9315 15.0068 12.6449 14.8881 12.4335 14.6767L10.2285 12.4727L8.02446 14.6777C7.81311 14.889 7.52647 15.0077 7.22758 15.0077C6.9287 15.0077 6.64205 14.889 6.43071 14.6777C6.21936 14.4663 6.10063 14.1797 6.10063 13.8808C6.10063 13.5819 6.21936 13.2953 6.43071 13.0839L8.63477 10.8789L6.43258 8.67484C6.32794 8.5702 6.24492 8.44596 6.18829 8.30923C6.13166 8.17251 6.10251 8.02596 6.10251 7.87797C6.10251 7.57908 6.22124 7.29244 6.43258 7.08109C6.64393 6.86975 6.93057 6.75102 7.22946 6.75102C7.52834 6.75102 7.81499 6.86975 8.02633 7.08109L10.2285 9.28516L12.4326 7.08016C12.6439 6.86881 12.9306 6.75008 13.2295 6.75008C13.5283 6.75008 13.815 6.86881 14.0263 7.08016C14.2377 7.2915 14.3564 7.57815 14.3564 7.87703C14.3564 8.17592 14.2377 8.46256 14.0263 8.67391L14.0245 8.67484ZM20.3535 10.8789C20.3535 12.8814 19.7597 14.839 18.6472 16.5041C17.5346 18.1691 15.9533 19.4669 14.1032 20.2332C12.2531 20.9995 10.2173 21.2 8.25323 20.8094C6.28917 20.4187 4.48507 19.4544 3.06906 18.0384C1.65306 16.6224 0.688745 14.8183 0.298069 12.8542C-0.0926062 10.8901 0.107903 8.85434 0.87424 7.00424C1.64058 5.15413 2.93832 3.57283 4.60337 2.46028C6.26842 1.34773 8.22598 0.753906 10.2285 0.753906C12.9129 0.756884 15.4865 1.82458 17.3847 3.72274C19.2828 5.6209 20.3505 8.1945 20.3535 10.8789ZM18.1035 10.8789C18.1035 9.32138 17.6417 7.79883 16.7763 6.50379C15.911 5.20875 14.6811 4.1994 13.2422 3.60335C11.8032 3.00731 10.2198 2.85136 8.69218 3.15522C7.16458 3.45908 5.76139 4.2091 4.66005 5.31044C3.55872 6.41178 2.80869 7.81497 2.50484 9.34257C2.20098 10.8702 2.35693 12.4536 2.95297 13.8925C3.54901 15.3315 4.55837 16.5614 5.8534 17.4267C7.14844 18.292 8.67099 18.7539 10.2285 18.7539C12.3164 18.7517 14.3182 17.9213 15.7945 16.4449C17.2709 14.9685 18.1013 12.9668 18.1035 10.8789Z"
                      fill="#D32F2F"
                    />
                  </svg>
                </span>
              </div>
            </div>
            }
            <div class="form-group__col-2 picture">
              <div class="img-div">
                <img
                  src="assets/images/image-upload.png"
                  alt="Profile Picture"
                />
              </div>
              <div>
                <p><span>Click here or drag</span> your files to upload</p>
                <p>Supported formats: PNG, JPG, JPEG (10mb max)</p>
              </div>
              <input
                type="file"
                id="cv"
                (change)="onFileSelect($event, 'cv')"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="form__col-1">
      <!-- Date of Birth -->
      <div class="form-group-div right">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Date of Birth</h5>
            <p>This is set to private. Only you see this.</p>
          </div>
          <div class="form-group__col-2 date">
            <mat-form-field>
              <input
                matInput
                [matDatepicker]="picker"
                formControlName="dateOfBirth"
              />
              <mat-datepicker-toggle
                matIconPrefix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Nationality -->
      <div class="form-group-div right">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Nationality</h5>
            <p>The country where you claim your citizenship.</p>
          </div>
          <div class="form-group__col-2 nationality">
            <mat-form-field>
              <mat-select formControlName="nationality">
                <mat-option value="Ghana">Ghana</mat-option>
                <mat-option value="Rwanda">Uganda</mat-option>
              </mat-select>
            </mat-form-field>

            <div class="city">
              <h5>Current Location</h5>
              <p>Enter your current city/town.</p>

              <app-cva formControlName="currentLocation" />
            </div>
          </div>
        </div>
      </div>

      <!-- Current Location -->

      <!-- Phone Number -->
      <div class="form-group-div right">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Phone Number</h5>
            <p>This is set to private. Only you see this.</p>
          </div>
          <div class="form-group__col-2 phone">
            <div class="select-code">
              <select name="" id="">
                <option value="ghana">+233</option>
                <option value="rwanda">+250</option>
              </select>
              <app-cva formControlName="phone" class="input" />
            </div>
            <div class="checkbox">
              <label>
                <app-custom-check-box
                  checkGroup="true"
                  text="Public"
                  text2="Private"
                  formControlName="phoneVisibility"
                />
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Social Media Pages (Dynamic) -->
      <div class="form-group-div right">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Social Media Pages</h5>
          </div>
          <div class="form-group__col-2 social">
            <div formArrayName="socialMediaHandles" class="socialMedia">
              <div
                *ngFor="let control of socialMedia.controls; let i = index"
                class="field"
              >
                <input [formControlName]="i" placeholder="Social Media Link" />
                <button (click)="removeSocialMedia(i)" class="remove">
                  <img src="assets/images/remove.svg" alt="remove icon" />
                </button>
              </div>
            </div>
            <button (click)="addSocialMedia()" class="add">
              <img src="assets/images/add.svg" alt="add icon" />
            </button>
          </div>
        </div>
      </div>

      <!-- Portfolio Links (Dynamic) -->
      <div class="form-group-div right">
        <div class="form-group">
          <div class="form-group__col-1">
            <h5>Portfolio Links</h5>
          </div>
          <div class="form-group__col-2 social">
            <div formArrayName="portfolioLinks" class="socialMedia">
              <div
                *ngFor="let control of portfolioLinks.controls; let i = index"
                class="field"
              >
                <input [formControlName]="i" placeholder="Portfolio Link" />
                <button (click)="removePortfolioLink(i)" class="remove">
                  <img src="assets/images/remove.svg" alt="remove icon" />
                </button>
              </div>
            </div>
            <button (click)="addPortfolioLink()" class="add">
              <img src="assets/images/add.svg" alt="add icon" />
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Buttons -->
  <div class="button-div">
    <button
      class="btn submit"
      type="submit"
      [disabled]="PersonalDetails.invalid"
    >
      Save changes
    </button>
    <button class="btn cancel" type="button" (click)="cancel()">Cancel</button>
  </div>
</form>

@if(showModal){
<app-modal-components />
}
